"use strict";(self["webpackChunkvue_manage"]=self["webpackChunkvue_manage"]||[]).push([[526],{2537:function(e,t,o){o.d(t,{Z:function(){return m}});var r=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",attrs:{"label-width":e.width||"100px",model:e.form_data,inline:e.inline,rules:e.rules}},[e._l(e.form_config,(function(o){return t("el-form-item",{key:o.lable,attrs:{label:o.label}},["input"===o.type?t("el-input",{attrs:{placeholder:"请输入"+o.label},model:{value:e.form_data[o.model],callback:function(t){e.$set(e.form_data,o.model,t)},expression:"form_data[item.model]"}}):e._e(),"switch"===o.type?t("el-switch",{model:{value:e.form_data[o.model],callback:function(t){e.$set(e.form_data,o.model,t)},expression:"form_data[item.model]"}}):e._e(),"date"===o.type?t("el-date-picker",{attrs:{placeholder:"请选择日期",type:"date","value-format":"yyyy-MM-dd"},model:{value:e.form_data[o.model],callback:function(t){e.$set(e.form_data,o.model,t)},expression:"form_data[item.model]"}}):e._e(),"select"===o.type?t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form_data[o.model],callback:function(t){e.$set(e.form_data,o.model,t)},expression:"form_data[item.model]"}},e._l(o.opts,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1)})),t("el-form-item",[e._t("default")],2)],2)},a=[],n={name:"CommonForm",props:{formConfig:Array,formData:Object,inline:Boolean,rules:Object,width:String},data(){return{form_config:this.formConfig,form_data:this.formData}}},l=n,s=o(1001),i=(0,s.Z)(l,r,a,!1,null,null,null),m=i.exports},9526:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("h3",{staticClass:"login-title"},[e._v("员工管理系统登录")]),t("common-form",{ref:"form",attrs:{formConfig:e.loginFormConfig,formData:e.loginFormData,rules:e.rules,width:e.width}}),t("div",{attrs:{slot:""},slot:"default"},[t("el-button",{staticClass:"login-submit",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)},a=[],n=o(2537),l=o(23),s={name:"Login",components:{CommonForm:n.Z},data(){return{width:"70px",loginFormConfig:[{label:"用户名",type:"input",model:"username"},{label:"密码",type:"input",model:"password"}],loginFormData:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{login(){const{username:e,password:t}=this.loginFormData;(0,l.cP)(e,t).then((e=>{console.log(e),localStorage.setItem("token",e.data.token),200===e.code?(this.$store.commit("tab/DEL_MENU"),this.$store.commit("tab/SET_MENU",e.data.menu),console.log(e.data.menu),this.$store.commit("user/SET_TOKEN",e.data.token),this.$store.commit("tab/ADD_MENU",this.$router),this.$router.push({name:"home"}),this.$store.commit("user/SET_TOKEN",e.token)):this.$message.error(e.data.message||"用户名或密码错误")})).catch((e=>{this.$message.error("登录请求失败: "+e.message)}))}}},i=s,m=o(1001),d=(0,m.Z)(i,r,a,!1,null,"78498ce0",null),c=d.exports},23:function(e,t,o){o.d(t,{HG:function(){return m},P6:function(){return d},cP:function(){return l},fN:function(){return s},xk:function(){return i}});var r=o(6265),a=o.n(r);a().defaults.baseURL="http://localhost:3000/api";let n=null;const l=async(e,t)=>{try{const o=await a().post("/login",{username:e,password:t});return n=o.data.data.token,a().defaults.headers.common["Authorization"]=`Bearer ${n}`,o.data}catch(o){throw console.error("Login error:",o.response.data),o}},s=async()=>{try{const e=localStorage.getItem("token"),t=await a().get("/employees",{headers:{Authorization:`Bearer ${e}`}});return t.data}catch(e){throw console.error("Get employees error:",e.response.data),e}},i=async(e,t,o,r,n)=>{try{const l=await a().post("/employees",{id:e,name:t,gender:o,age:r,dept:n});return l.data}catch(l){throw console.error("Add employee error:",l.response.data),l}},m=async(e,t,o,r,n)=>{try{const l=await a().put(`/employees/${e}`,{name:t,gender:o,age:r,dept:n});return l.data}catch(l){throw console.error("Update employee error:",l.response.data),l}},d=async e=>{try{const t=await a()["delete"](`/employees/${e}`);return t.data}catch(t){throw console.error("Delete employee error:",t.response.data),t}}}}]);
//# sourceMappingURL=526.70e8b841.js.map